(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t),n.d(t,"FACTORY_HEIGHT",function(){return a}),n.d(t,"FACTORY_WIDTH",function(){return i}),n.d(t,"BLOCK_EMPTY",function(){return r}),n.d(t,"MACHINE_STARTER",function(){return u}),n.d(t,"MACHINE_SELLER",function(){return o}),n.d(t,"MACHINE_TRANSPORTER",function(){return l}),n.d(t,"MACHINE_FURNACE",function(){return s}),n.d(t,"MACHINE_CRAFTER",function(){return f}),n.d(t,"MACHINE_TYPES",function(){return m}),n.d(t,"ACTION_SELECTION_NEW",function(){return O}),n.d(t,"ACTION_SELECTION_BLANK",function(){return h}),n.d(t,"ACTION_SELECTION_MACHINE",function(){return E}),n.d(t,"ACTION_DELETE",function(){return d}),n.d(t,"ACTION_ROTATE",function(){return b}),n.d(t,"ACTION_MOVE",function(){return N}),n.d(t,"STARTER_PRICE",function(){return j}),n.d(t,"SELLER_PRICE",function(){return p}),n.d(t,"TRANSPORTER_PRICE",function(){return C}),n.d(t,"FURNACE_PRICE",function(){return T}),n.d(t,"CRAFTER_PRICE",function(){return v}),n.d(t,"initialState",function(){return I});var c=n(23),a=8,i=8,r="BLOCK_EMPTY",u="STARTER",o="SELLER",l="TRANSPORTER",s="FURNACE",f="CRAFTER",m=[u,o,l,s,f],O="ACTION_SELECTION_NEW",h="ACTION_SELECTION_BLANK",E="ACTION_SELECTION_MACHINE",d="ACTION_DELETE",b="ACTION_ROTATE",N="ACTION_MOVE",j=100,p=250,C=50,T=300,v=200,I={factory:Object(c.a)(Array(a*i)).map(function(){return null}),selected:"",money:1e3}},21:function(e,t,n){},24:function(e,t,n){e.exports=n(39)},29:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(12),r=n.n(i),u=n(14),o=(n(29),n(1)),l=n(2),s=n(4),f=n(3),m=n(5),O=(n(30),n(6)),h=n(10),E=function(){function e(t){Object(o.a)(this,e),this.name=t,this.price=100,this.content=""}return Object(l.a)(e,[{key:"transform",value:function(){return this}}],[{key:"createMaterial",value:function(e){switch(e){case"IRON":return new d;case"DIAMOND":return new N;case"GOLD":return new p}}}]),e}(),d=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"IRON"))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new b}}]),t}(E),b=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_IRON"))}return Object(m.a)(t,e),t}(E),N=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"DIAMOND"))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new j}}]),t}(E),j=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_DIAMOND"))}return Object(m.a)(t,e),t}(E),p=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"GOLD"))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new C}}]),t}(E),C=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_GOLD"))}return Object(m.a)(t,e),t}(E),T=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(f.a)(t).call(this,"SWORD"))).content="\ud83d\udde1\ufe0f",e}return Object(m.a)(t,e),t}(E),v=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(f.a)(t).call(this,"Trophy"))).content="\ud83c\udfc6",e}return Object(m.a)(t,e),t}(E),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(f.a)(t).call(this,"Ring"))).content="\ud83d\udc8d",e}return Object(m.a)(t,e),t}(E),y=function(){function e(t){Object(o.a)(this,e),this.id=t}return Object(l.a)(e,[{key:"execute",value:function(e){return e.clone()}}]),e}(),R=function(e){function t(e,n){var c;return Object(o.a)(this,t),(c=Object(s.a)(this,Object(f.a)(t).call(this,e))).material=n,c}return Object(m.a)(t,e),Object(l.a)(t,[{key:"execute",value:function(e){return e.material.push(this.material),e.clone()}}]),t}(y),A=function(){function e(){Object(o.a)(this,e),this.name="SWORD",this.ingredients=["IRON","IRON","IRON"]}return Object(l.a)(e,[{key:"craft",value:function(e){var t=this;if(e.filter(function(e){return t.ingredients.includes(e.name)}).length>=this.ingredients.length)return new T}}]),e}(),_=function(){function e(){Object(o.a)(this,e),this.name="TROPHY",this.ingredients=["GOLD","GOLD","GOLD"]}return Object(l.a)(e,[{key:"craft",value:function(e){var t=this;if(e.filter(function(e){return t.ingredients.includes(e.name)}).length>=this.ingredients.length)return new v}}]),e}(),k=function(){function e(){Object(o.a)(this,e),this.name="RING",this.ingredients=["GOLD","GOLD","DIAMOND"]}return Object(l.a)(e,[{key:"craft",value:function(e){var t=this;if(e.filter(function(e){return t.ingredients.includes(e.name)}).length>=this.ingredients.length)return new I}}]),e}(),L=function(){function e(t){Object(o.a)(this,e),this.id=t,this.orientation="DOWN",this.material=[],this.price=100}return Object(l.a)(e,[{key:"update",value:function(){return[]}},{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"getNextMachineId",value:function(){return this.id+{DOWN:8,RIGHT:1,UP:-8,LEFT:-1}[this.orientation]}},{key:"rotate",value:function(){var e=["DOWN","RIGHT","UP","LEFT"],t=(e.indexOf(this.orientation)+1)%4;this.orientation=e[t]}}],[{key:"createMachine",value:function(e,t){switch(e){case"STARTER":return new w(t);case"SELLER":return new M(t);case"TRANSPORTER":return new S(t);case"FURNACE":return new D(t);case"CRAFTER":return new g(t)}}}]),e}(),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="STARTER",n.production="IRON",n.frequency=3,n.counter=0,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){return this.counter++,this.frequency===this.counter?(this.counter=0,[new R(this.getNextMachineId(),E.createMaterial(this.production))]):[]}}]),t}(L),M=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="SELLER",n.profit=0,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){return this.profit=this.material.reduce(function(e,t){return e+t.price},0),this.material=[],[new y(this.id)]}}]),t}(L),S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="TRANSPORTER",n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this,t=[];return this.material.map(function(n){return t.push(new R(e.getNextMachineId(),n))}),this.material=[],t.push(new y(this.id)),t}}]),t}(L),D=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="FURNACE",n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this,t=[];return this.material.map(function(n){return t.push(new R(e.getNextMachineId(),n.transform()))}),this.material=[],t.push(new y(this.id)),t}}]),t}(L),g=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="CRAFTER",n.recipe=new A,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this.recipe.craft(this.material);return e?(this.material=[],[new y(this.id),new R(this.getNextMachineId(),e)]):[]}}]),t}(L),P=(n(35),n(21),n(15)),H=n(10),F=function(e){var t=e.type,n=e.onSelected,c=e.selection,i={btn:!0,selected:c.machine&&t===c.machine.name&&"NEW"===c.type};return a.a.createElement("span",{className:P(i),onClick:function(){return n(L.createMachine(t))}},a.a.createElement("div",{className:"machine "+t.toLowerCase()}))},W=Object(O.b)(function(e){return{selection:e.selected}},function(e){return{onSelected:function(t){return e(function(e){return{type:h.ACTION_SELECTION_NEW,machine:e}}(t))}}})(function(e){var t=e.onSelected,n=e.selection;return a.a.createElement("div",{className:"toolbox"},a.a.createElement("h1",{className:"title"},"M\xe1quinas"),a.a.createElement("div",{className:"items"},H.MACHINE_TYPES.map(function(e){return a.a.createElement(F,{type:e,selection:n,onSelected:t})})))}),G=n(8),x=n(15),U=function(e){var t,n=(t={machine:!0},Object(G.a)(t,e.machine.name.toLowerCase(),!0),Object(G.a)(t,e.machine.orientation.toLowerCase(),!0),Object(G.a)(t,"working",e.machine.material.length>0),t);return a.a.createElement("div",{onClick:e.onClick,className:x(n)},e.machine.material.map(function(e){var t=Object(G.a)({material:!0},e.name.toLowerCase(),!0);return a.a.createElement("div",{className:x(t)},a.a.createElement("span",{className:"content"},e.content))}))},B=n(15),K=Object(O.b)(function(e){return{selection:e.selected}},function(e){return{onBlankClick:function(t){return e(function(e){return{type:h.ACTION_SELECTION_BLANK,blockId:e}}(t))},onMachineClick:function(t){return e(function(e){return{type:h.ACTION_SELECTION_MACHINE,machine:e}}(t))}}})(function(e){var t={block:!0,selected:e.machine&&e.selection.machine&&e.selection.machine.id===e.machine.id};return e.machine?a.a.createElement("span",{className:B(t)},a.a.createElement(U,{onClick:function(){return e.onMachineClick(e.machine)},machine:e.machine})):a.a.createElement("span",{className:B(t),onClick:function(){return e.onBlankClick(e.id)}})}),Y=(n(36),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="factory";return this.props.toMove&&(e="factory factory_disabled"),a.a.createElement("div",{className:e},this.props.factory.map(function(e,t){return a.a.createElement(K,{machine:e,key:t,id:t})}))}}]),t}(a.a.Component)),V=Object(O.b)(function(e){return{selected:e.selected,factory:e.factory,toMove:e.toMove}},null)(Y),q=(n(37),function(e){return e.machine?a.a.createElement("div",{className:"machine-details"},a.a.createElement("p",null,"MACHINE: ",e.machine.name),e.machine.frequency?a.a.createElement("p",null,"Frecuencia: ",e.machine.frequency):"",e.machine.production?a.a.createElement("p",null,"Producci\xf3n: ",e.machine.production):"",a.a.createElement("p",null,"Precio: $",e.machine.price)):null}),X=Object(O.b)(function(e){return{money:e.money,toMove:e.toMove,selection:e.selected}},function(e){return{onDeleted:function(t){return e(function(e){return{type:h.ACTION_DELETE,machine:e}}(t))},onRotate:function(t){return e(function(e){return{type:h.ACTION_ROTATE,machine:e}}(t))},onMove:function(t){return e(function(e){return{type:h.ACTION_MOVE,machine:e}}(t))},selectRecipe:function(t,n){return e(function(e,t){return{type:"SELECT_RECIPE",recipe:e,id:t}}(t,n))}}})(function(e){var t=function(t){return e.selection.machine.production=t};return a.a.createElement("div",{className:"details-toolbox"},a.a.createElement("h1",{className:"title"},"Edici\xf3n"),a.a.createElement("div",{className:"content"},a.a.createElement(q,{machine:e.selection.machine}),e.selection&&e.selection.machine.production?a.a.createElement("div",{className:"buttons-material"},a.a.createElement("div",{className:"btn iron",onClick:function(){return t("IRON")}}),a.a.createElement("div",{className:"btn diamond",onClick:function(){return t("DIAMOND")}}),a.a.createElement("div",{className:"btn gold",onClick:function(){return t("GOLD")}})):null,e.selection.machine?"CRAFTER"===e.selection.machine.name?a.a.createElement("span",null,a.a.createElement("p",null,"Recetas:"),a.a.createElement("div",{className:"buttons-material"},a.a.createElement("div",{className:"btn sword",onClick:function(){return e.selectRecipe(new A,e.selection.machine.id)}}),a.a.createElement("div",{className:"btn trophy",onClick:function(){return e.selectRecipe(new _,e.selection.machine.id)}}),a.a.createElement("div",{className:"btn ring",onClick:function(){return e.selectRecipe(new k,e.selection.machine.id)}}))):void 0:null,e.selection&&"NEW"!==e.selection.type?a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{className:"btn delete",onClick:function(){return e.onDeleted(e.selection.machine)}}),a.a.createElement("div",{className:"btn rotate",onClick:function(){return e.onRotate(e.selection.machine)}}),a.a.createElement("div",{className:"btn move",onClick:function(){return e.onMove(e.selection.machine)}})):null))}),Q=(n(38),Object(O.b)(function(e){return{money:e.money}})(function(e){var t=e.money;return a.a.createElement("div",{className:"money"},"Dinero: $",t," ")})),$=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.props.notifyTick,1e3)}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",{className:"app-title"},"Revoluci\xf3n Industrial"),a.a.createElement(Q,null)),a.a.createElement("div",{className:"container"},a.a.createElement(W,null),a.a.createElement(V,null),a.a.createElement(X,null)))}}]),t}(a.a.Component),J=Object(O.b)(null,function(e){return{notifyTick:function(){return e({type:"TICK"})}}})($);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(10),Z=n(7),ee=[],te=function(e){e.factory.map(function(e,t){return e?function(e,t){var n=e.update();ee=ee.concat(n)}(e):null});var t=ee.reduce(function(e,t){return function(e,t){var n=e.factory[t.id];return n?(n.profit&&(e.money=e.money+n.profit,n.profit=0),e.factory[t.id]=t.execute(n),e):e}(e,t)},e);return ee=[],Object(Z.a)({},e,{factory:t.factory.slice(0)})},ne=n(10),ce=Object(u.b)(function(e,t){switch(t.type){case ne.ACTION_SELECTION_NEW:return Object(Z.a)({},e,{selected:{type:"NEW",machine:t.machine}});case ne.ACTION_SELECTION_BLANK:return function(e,t){if("NEW"!==e.selected.type)return e;var n=e.selected.machine;return n.id=t,n.price>e.money?e:Object(Z.a)({},e,{factory:e.factory.map(function(e,c){return c===t?n:e}),selected:{type:"MACHINE",machine:n},money:e.money-n.price})}(e,t.blockId);case ne.ACTION_SELECTION_MACHINE:return Object(Z.a)({},e,{selected:{type:"MACHINE",machine:t.machine}});case ne.ACTION_ROTATE:return function(e,t){return t.rotate(),e.factory[t.id]=t.clone(),Object(Z.a)({},e,{factory:e.factory.slice(0)})}(e,t.machine);case ne.ACTION_DELETE:return function(e,t){return e.factory[t.id]=null,Object(Z.a)({},e,{selected:"",factory:e.factory.slice(0)})}(e,t.machine);case"SELECT_RECIPE":return function(e,t,n){return e.factory[n]&&(e.factory[n].recipe=t),e.selected.machine&&(e.selected.machine.recipe=t),Object(Z.a)({},e,{factory:e.factory.slice(0)})}(e,t.recipe,t.id);case"TICK":return function(e,t){return te(e)}(e);case ne.ACTION_MOVE:return Object(Z.a)({},e,{toMove:e.toMove});default:return e}},z.initialState,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(a.a.createElement(O.a,{store:ce},a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.295fee01.chunk.js.map