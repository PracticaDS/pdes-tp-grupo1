(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){},23:function(e,t,n){e.exports=n(38)},28:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(11),i=n.n(r),u=n(13),o=(n(28),n(1)),l=n(2),s=n(4),f=n(3),O=n(5),m=(n(29),n(6)),h=n(9),E=function(){function e(t){Object(o.a)(this,e),this.name=t,this.price=100,this.content=""}return Object(l.a)(e,[{key:"transform",value:function(){return this}}],[{key:"createMaterial",value:function(e){switch(e){case"IRON":return new d;case"DIAMOND":return new N;case"GOLD":return new T}}}]),e}(),d=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"IRON"))}return Object(O.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new b}}]),t}(E),b=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_IRON"))}return Object(O.a)(t,e),t}(E),N=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"DIAMOND"))}return Object(O.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new j}}]),t}(E),j=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_DIAMOND"))}return Object(O.a)(t,e),t}(E),T=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"GOLD"))}return Object(O.a)(t,e),Object(l.a)(t,[{key:"transform",value:function(){return new C}}]),t}(E),C=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).call(this,"LIQUID_GOLD"))}return Object(O.a)(t,e),t}(E),I=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(f.a)(t).call(this,"SWORD"))).content="\ud83d\udde1\ufe0f",e}return Object(O.a)(t,e),t}(E),p=function(){function e(t){Object(o.a)(this,e),this.id=t}return Object(l.a)(e,[{key:"execute",value:function(e){return e.clone()}}]),e}(),y=function(e){function t(e,n){var c;return Object(o.a)(this,t),(c=Object(s.a)(this,Object(f.a)(t).call(this,e))).material=n,c}return Object(O.a)(t,e),Object(l.a)(t,[{key:"execute",value:function(e){return e.material.push(this.material),e.clone()}}]),t}(p),v=function(){function e(){Object(o.a)(this,e),this.ingredients=["IRON","IRON","IRON"]}return Object(l.a)(e,[{key:"craft",value:function(e){var t=this;if(e.filter(function(e){return t.ingredients.includes(e.name)}).length>=this.ingredients.length)return new I}}]),e}(),A=function(){function e(t){Object(o.a)(this,e),this.id=t,this.orientation="DOWN",this.material=[],this.price=100}return Object(l.a)(e,[{key:"update",value:function(){return[]}},{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"getNextMachineId",value:function(){return this.id+{DOWN:8,RIGHT:1,UP:-8,LEFT:-1}[this.orientation]}},{key:"rotate",value:function(){var e=["DOWN","RIGHT","UP","LEFT"],t=(e.indexOf(this.orientation)+1)%4;this.orientation=e[t]}}],[{key:"createMachine",value:function(e,t){switch(e){case"STARTER":return new R(t);case"SELLER":return new _(t);case"TRANSPORTER":return new k(t);case"FURNACE":return new L(t);case"CRAFTER":return new M(t)}}}]),e}(),R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="STARTER",n.production="IRON",n.frequency=3,n.counter=0,n}return Object(O.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){return this.counter++,this.frequency===this.counter?(this.counter=0,[new y(this.getNextMachineId(),E.createMaterial(this.production))]):[]}}]),t}(A),_=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="SELLER",n.profit=0,n}return Object(O.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){return this.profit=this.material.reduce(function(e,t){return e+t.price},0),this.material=[],[new p(this.id)]}}]),t}(A),k=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="TRANSPORTER",n}return Object(O.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this,t=[];return this.material.map(function(n){return t.push(new y(e.getNextMachineId(),n))}),this.material=[],t.push(new p(this.id)),t}}]),t}(A),L=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="FURNACE",n}return Object(O.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this,t=[];return this.material.map(function(n){return t.push(new y(e.getNextMachineId(),n.transform()))}),this.material=[],t.push(new p(this.id)),t}}]),t}(A),M=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(f.a)(t).call(this,e))).name="CRAFTER",n.recipe=new v,n}return Object(O.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){var e=this.recipe.craft(this.material);return e?(this.material=[],[new p(this.id),new y(this.getNextMachineId(),e)]):[]}}]),t}(A),w=(n(34),n(19),n(20)),S=n(9),D=function(e){var t=e.type,n=e.onSelected,c=e.selection,r={btn:!0,selected:c.machine&&t===c.machine.name&&"NEW"===c.type};return a.a.createElement("span",{className:w(r),onClick:function(){return n(A.createMachine(t))}},a.a.createElement("div",{className:"machine "+t.toLowerCase()}))},H=Object(m.b)(function(e){return{selection:e.selected}},function(e){return{onSelected:function(t){return e(function(e){return{type:h.ACTION_SELECTION_NEW,machine:e}}(t))}}})(function(e){var t=e.onSelected,n=e.selection;return a.a.createElement("div",{className:"toolbox"},a.a.createElement("h1",{className:"title"},"M\xe1quinas"),a.a.createElement("div",{className:"items"},S.MACHINE_TYPES.map(function(e){return a.a.createElement(D,{type:e,selection:n,onSelected:t})})))}),P=function(e){return a.a.createElement("div",{onClick:e.onClick,className:"machine ".concat(e.machine.name.toLowerCase()," ").concat(e.machine.orientation.toLowerCase())},e.machine.material.map(function(e){return a.a.createElement("div",{className:"material ".concat(e.name.toLowerCase())},e.content)}))},g=n(20),F=Object(m.b)(function(e){return{selection:e.selected}},function(e){return{onBlankClick:function(t){return e(function(e){return{type:h.ACTION_SELECTION_BLANK,blockId:e}}(t))},onMachineClick:function(t){return e(function(e){return{type:h.ACTION_SELECTION_MACHINE,machine:e}}(t))}}})(function(e){var t={block:!0,selected:e.machine&&e.selection.machine&&e.selection.machine.id===e.machine.id};return e.machine?a.a.createElement("span",{className:g(t)},a.a.createElement(P,{onClick:function(){return e.onMachineClick(e.machine)},machine:e.machine})):a.a.createElement("span",{className:g(t),onClick:function(){return e.onBlankClick(e.id)}})}),W=(n(35),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="factory";return this.props.toMove&&(e="factory factory_disabled"),a.a.createElement("div",{className:e},this.props.factory.map(function(e,t){return a.a.createElement(F,{machine:e,key:t,id:t})}))}}]),t}(a.a.Component)),x=Object(m.b)(function(e){return{selected:e.selected,factory:e.factory,toMove:e.toMove}},null)(W),U=(n(36),function(e){return e.machine?a.a.createElement("div",{className:"machine-details"},a.a.createElement("p",null,"MACHINE: ",e.machine.name),e.machine.frequency?a.a.createElement("p",null,"Frecuencia: ",e.machine.frequency):"",e.machine.production?a.a.createElement("p",null,"Producci\xf3n: ",e.machine.production):"",a.a.createElement("p",null,"Precio: $",e.machine.price)):null}),B=Object(m.b)(function(e){return{money:e.money,toMove:e.toMove,selection:e.selected}},function(e){return{onDeleted:function(t){return e(function(e){return{type:h.ACTION_DELETE,machine:e}}(t))},onRotate:function(t){return e(function(e){return{type:h.ACTION_ROTATE,machine:e}}(t))},onMove:function(t){return e(function(e){return{type:h.ACTION_MOVE,machine:e}}(t))}}})(function(e){var t=function(t){return e.selection.machine.production=t};return a.a.createElement("div",{className:"details-toolbox"},a.a.createElement("h1",{className:"title"},"Edici\xf3n"),a.a.createElement("div",{className:"content"},a.a.createElement(U,{machine:e.selection.machine}),e.selection&&e.selection.machine.production?a.a.createElement("div",{className:"buttons-material"},a.a.createElement("div",{className:"btn iron",onClick:function(){return t("IRON")}}),a.a.createElement("div",{className:"btn diamond",onClick:function(){return t("DIAMOND")}}),a.a.createElement("div",{className:"btn gold",onClick:function(){return t("GOLD")}})):null,e.selection&&"NEW"!==e.selection.type?a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{className:"btn delete",onClick:function(){return e.onDeleted(e.selection.machine)}}),a.a.createElement("div",{className:"btn rotate",onClick:function(){return e.onRotate(e.selection.machine)}}),a.a.createElement("div",{className:"btn move",onClick:function(){return e.onMove(e.selection.machine)}})):null))}),K=(n(37),Object(m.b)(function(e){return{money:e.money}})(function(e){var t=e.money;return a.a.createElement("div",{className:"money"},"Dinero: $",t," ")})),G=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.props.notifyTick,1e3)}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",{className:"app-title"},"Revoluci\xf3n Industrial"),a.a.createElement(K,null)),a.a.createElement("body",null,a.a.createElement(H,null),a.a.createElement(x,null),a.a.createElement(B,null)))}}]),t}(a.a.Component),V=Object(m.b)(null,function(e){return{notifyTick:function(){return e({type:"TICK"})}}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(9),q=n(7),X=[],Q=function(e){e.factory.map(function(e,t){return e?function(e,t){var n=e.update();X=X.concat(n)}(e):null});var t=X.reduce(function(e,t){return function(e,t){var n=e.factory[t.id];return n?(n.profit&&(e.money=e.money+n.profit,n.profit=0),e.factory[t.id]=t.execute(n),e):e}(e,t)},e);return X=[],Object(q.a)({},e,{factory:t.factory.slice(0)})},$=n(9),J=Object(u.b)(function(e,t){switch(t.type){case $.ACTION_SELECTION_NEW:return Object(q.a)({},e,{selected:{type:"NEW",machine:t.machine}});case $.ACTION_SELECTION_BLANK:return function(e,t){if("NEW"!==e.selected.type)return e;var n=e.selected.machine;return n.id=t,n.price>e.money?e:Object(q.a)({},e,{factory:e.factory.map(function(e,c){return c===t?n:e}),selected:{type:"MACHINE",machine:n},money:e.money-n.price})}(e,t.blockId);case $.ACTION_SELECTION_MACHINE:return Object(q.a)({},e,{selected:{type:"MACHINE",machine:t.machine}});case $.ACTION_ROTATE:return function(e,t){return t.rotate(),e.factory[t.id]=t.clone(),Object(q.a)({},e,{factory:e.factory.slice(0)})}(e,t.machine);case $.ACTION_DELETE:return function(e,t){return e.factory[t.id]=null,Object(q.a)({},e,{selected:"",factory:e.factory.slice(0)})}(e,t.machine);case"TICK":return function(e,t){return Q(e)}(e);case $.ACTION_MOVE:return Object(q.a)({},e,{toMove:e.toMove});default:return e}},Y.initialState,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(a.a.createElement(m.a,{store:J},a.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){"use strict";n.r(t),n.d(t,"FACTORY_HEIGHT",function(){return a}),n.d(t,"FACTORY_WIDTH",function(){return r}),n.d(t,"BLOCK_EMPTY",function(){return i}),n.d(t,"MACHINE_STARTER",function(){return u}),n.d(t,"MACHINE_SELLER",function(){return o}),n.d(t,"MACHINE_TRANSPORTER",function(){return l}),n.d(t,"MACHINE_FURNACE",function(){return s}),n.d(t,"MACHINE_CRAFTER",function(){return f}),n.d(t,"MACHINE_TYPES",function(){return O}),n.d(t,"ACTION_SELECTION_NEW",function(){return m}),n.d(t,"ACTION_SELECTION_BLANK",function(){return h}),n.d(t,"ACTION_SELECTION_MACHINE",function(){return E}),n.d(t,"ACTION_DELETE",function(){return d}),n.d(t,"ACTION_ROTATE",function(){return b}),n.d(t,"ACTION_MOVE",function(){return N}),n.d(t,"STARTER_PRICE",function(){return j}),n.d(t,"SELLER_PRICE",function(){return T}),n.d(t,"TRANSPORTER_PRICE",function(){return C}),n.d(t,"FURNACE_PRICE",function(){return I}),n.d(t,"CRAFTER_PRICE",function(){return p}),n.d(t,"initialState",function(){return y});var c=n(22),a=8,r=8,i="BLOCK_EMPTY",u="STARTER",o="SELLER",l="TRANSPORTER",s="FURNACE",f="CRAFTER",O=[u,o,l,s,f],m="ACTION_SELECTION_NEW",h="ACTION_SELECTION_BLANK",E="ACTION_SELECTION_MACHINE",d="ACTION_DELETE",b="ACTION_ROTATE",N="ACTION_MOVE",j=100,T=250,C=50,I=300,p=200,y={factory:Object(c.a)(Array(a*r)).map(function(){return null}),selected:"",money:1e3}}},[[23,1,2]]]);
//# sourceMappingURL=main.67eee62e.chunk.js.map